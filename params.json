{"name":"Aidoatp","tagline":"Reference Implementation of IsisATP from the Open Payments Alliance","body":"# Aido ATP\r\n========\r\n\r\nAido Advanced Trading Platform \r\n\r\nAido ATP is forked from IsisATP courtesy of the Open Payment Alliance.\r\n\r\n## What is Aido ATP?\r\n================\r\n\r\nAido ATP is an automated trading platform primarily used for trading bitcoins (BTC) on various bitcoin exchanges.\r\n\r\n## How does it work?\r\n=================\r\n\r\nOn startup Aido ATP goes into a learning mode for a configurable amount of time where it collects market data to be used by the trading algorithms. After the learning period is over every time a new tick is received the trading algorithms make a decision on whether it is favourable to trade at that time. The trading algorithms currently implemented are:\r\n\r\n### Arbitrage algorithm\r\n-------------------\r\n\r\nQuite frequently there is a difference in the price of BTC in different currency pairs.\r\n\r\nFor instance, at time of writing, USD/BTC rate is $11.80 whereas the EUR/BTC rate is â‚¬9.14\r\n\r\nAt the same time the USD/EUR rate is 0.77 and the EUR/USD rate is 1.29\r\n\r\nYou could buy BTC in USD, then turn around and sell that same BTC back into EUR and make a profit of 0.52 EUR.  Next you buy BTC with all the 0.52EUR profit you just made and sell that BTC back to USD for a profit of 0.67USD\r\n\r\n\t1 BTC = 11.80 USD\r\n\t1 BTC = 9.14 EUR\r\n\r\n\t1 USD = 0.76 EUR\r\n\t1 EUR = 1.29 USD\r\n\r\nThe arbitrage engine uses the current trading algorithm to find the highest profit place to sell when it detects that the market conditions are right to sell.\r\n\r\nBuys take place as normal, but only do so on the pair with the lowest cost real cost (BTCAsk * normalizing factor (pair1/pair2))\r\n\r\n### Advance/Decline Spread algorithm\r\n--------------------------------\r\n\r\nA simple Advance/Decline Spread algorithm is used to interpret the breadth of the market. This oscillator is extremely fast.\r\n\r\n### Exponential Moving Average based trend following algorithm\r\n----------------------------------------------------------\r\n\r\nThe EMA algorithm reacts to trends very quickly but not as quick as the Advance/Decline Spread algorithm. It lags somewhat behind the Advance/Decline Spread algorithm. The EMA buy and sell decision is based on the crossover between two EMAs, one long and one short. The length of these moving averages is configurable.\r\n\r\n### Simple Moving Average based trend following algorithm\r\n-----------------------------------------------------\r\n\r\nThe SMA algorithm reaction to trends is slower than both the EMA algorithm and the Advance/Decline Spread algorithm. Similar to the EMA, the SMA buy and sell deciscion is based on the crossover between two SMAs, one long and one short. The length of these moving averages is configurable.\r\n\r\n\r\n### Volume Participation algorithm (VWAP Cross)\r\n------------------------------------------\r\n\r\nThe trend observer functionality constantly monitors the market for trends. A combination of the Advance/Decline Spread, SMA and EMA algorithms decide what way the market is trending.\r\n\r\n\tMarket Trending Down = Look at buying\r\n\tMarket Trending Up = Look at selling\r\n\r\nOnce it is decided the trend is up (ask) or down (bid) it then compares the last transaction to the VWAP.\r\n\r\nThe ratio of last price versus VWAP is used as a waterline to make the final determination that we will take an action.\r\n\r\n\tIf trend = down & last < VWAP then buy\r\n\tIf trend = up & last > VWAP then sell\r\n\t\r\n### Moving Average Convergence-Divergence algorithm\r\n-----------------------------------------------\r\nThe MACD line turns two trend-following indicators, exponential moving averages, into a momentum oscillator by subtracting the longer moving average from the shorter moving average. A MACD Signal Line is calulated from EMA of the MACD Line.\r\n\r\n\r\n## Deciding when to buy or sell\r\n============================\r\nAny of the above trending algorithms may be used to make a trade decision. The trading logic is dynamic and is contained in the configuration file.\r\n\r\nBoolean logic is used with the following parameters for each trading algorithm:\r\n\r\nAdvance/Decline Spread algorithm:\t\t\t\tADS_Up and ADS_Down\r\n\r\nExponential Moving Average algorithm:\t\t\tEMA_Up and EMA_Down\r\n\r\nSimple Moving Average algorithm:\t\t\t\tSMA_Up and SMA_Down\r\n\r\nVolume Participation algorithm (VWAP Cross):\tVWAPCross_Up and VWAPCross_Down\r\n\r\nMoving Average Convergence-Divergence:\t\t\tMACD_Positive and MACD_Negative\t(MACD line above or below zero)\r\n\r\nMoving Average Convergence-Divergence:\t\t\tMACD_Up and MACD_Down (MACD line above or below MACD Signal line)\r\n\r\nThe following logical operators may be used:\r\n\r\n\tOperator\tResult\r\n\t--------\t------\r\n\t\t&\t\tLogical AND\r\n\r\n\t\t|\t\tLogical OR\r\n\r\n\t\t^\t\tLogical XOR\r\n\r\n\t\t||\t\tShort-circuit OR\r\n\r\n\t\t&&\t\tShort-circuit AND\r\n\r\n\t\t!\t\tLogical unary NOT\r\n\t\t\r\nExpressions may be grouped using parentheses i.e. '(' and ')'.\r\n\r\nFor example, the following logic may be used in the configuration file to trigger a trade when the Advance/Decline Spread algorithm indicates that the market is trending down but the both the EMA and SMA algorithms indicate that the market is trending up.\r\n\r\n\tADS_Down && (EMA_Up && SMA_Up)\r\n\r\nTHE WRONG CONFIGURATION OF ANY OF THE ABOVE ALGORITHMS MAY LEAD TO SUBSTANTIAL LOSSES!!!\r\n\r\nOnce a trade decision has been made a stop loss value and risk calculation is used to determine the trade amount.\r\n\r\n\r\n## How much currency to use in a trade\r\n===================================\r\nOnce we have decided to buy or sell, then we look at the ask, bid and trend arrows calculated from the Advance/Decline Spread Algorithm. This gives us an indication of how much momentum is in the current trend and is used to calculate a weight.\r\n\r\n\tcurrent balance (BTC or local currency depending on Bid or Ask) * weight = how much we will be trading with.\r\n\t\r\n## Risk\r\n====\r\n\r\nThe user has a choice of conservative, high or maximun risk trading.\r\n\r\nThe Trend Observer calculates the Advance/Decline spread for ask, bid and last prices to give a askArrow, bidArrow and trendArrow values. These values are then used to calculate a weight.\r\n\r\nThe weight is calculated one of two ways based on the choice of high risk or conservative and compared to stop loss value. If the calculated weight is above the stop loss value, weight is reduced to the configured stop loss value.\r\n\r\nHere's how the weight is calculated for Bid/Buy:\r\n\r\n\tif(algorithm == 1) {\r\n\t\t//Conservative\r\n\t\tweight = (askArrow / tickerSize) * (trendArrow / tickerSize);\r\n\t} else if(algorithm == 2) {\r\n\t\t//High\r\n\t\tweight = (askArrow + trendArrow) / tickerSize;\r\n\t} else if(algorithm == 3) {\r\n\t\t//Maximum\r\n\t\tweight = 1;\r\n\t} else {\r\n\t\t// illegal value <1 or >3\r\n\t\t// Conservative (Default)\r\n\t\tweight = (askArrow / tickerSize) * (trendArrow / tickerSize);\r\n\t}\r\n\t\r\nAsk/Sell weight is calulated in a similar way.\r\n\t\t\t\r\nAlgorithm 1 is conservative risk, algorithm 2 is high risk and algorithm 3 is maximum risk.\r\n\r\n## Exchanges\r\n=========\r\n\r\nAido ATP currently trades on the MtGox, BTC-e, Bitstamp and CampBX exchanges.\r\n\r\n## Usage\r\n=====\r\n\r\nAido ATP may be launched using the following command line:\r\n\r\n\tjava -jar aidoatp.jar\r\n\r\nWhen run for the first time a configuration needs to be created. This can be done by adding the --clear-config switch and the user will then be interviewed:\r\n\r\n\tjava -jar aidoatp.jar --clear-config=true\r\n\r\nThe following switches are also available from the command line:\r\n\r\n\t--simulation-mode=true/false\tEnable or disable a test/simulation mode where live trades will not be performed\r\n\t--use-arbitrage=true/false\t\tEnable or disable the arbitrage trading engine\r\n\t--use-trend=true/false\t\t\tEnable or disable the trend-following trading agent\r\n\r\nThe configuration file is stored in the ~/.java/.userPrefs/org/aido/atp/prefs.xml file on Linux/UNIX systems or the HKEY_CURRENT_USER\\Software\\JavaSoft\\Prefs\\org\\aido\\atp registry on Microsoft Windows systems.\r\n\r\nWhen interviewed the user will be asked for the following information:\r\n\r\n\tUse MtGOX exchange (y/n)\r\n\t\tMtGOX API key\r\n\t\tMtGOX secret key\r\n\tUse BTC-e exchange (y/n)\r\n\t\tBTC-e API key\r\n\t\tBTC-e secret key\r\n\tUse Bitstamp exchange (y/n)\r\n\t\tBitstamp Username\r\n\t\tBitstamp Password\r\n\tUse Bitcoin Central exchange (y/n)\r\n\t\tBitcoin Central Username\r\n\t\tBitcoin Central Password\r\n\tISO Code for Prefered Currency (i.e. USD, GBP, JPY, EUR etc)\r\n\tUse ONLY local currency for trades (y/n)\r\n\tMaximum number of bitcoins to trade in a single order\r\n\tMinimum number of bitcoins to trade in a single order\r\n\tMaximum amount of local currency to trade in a single order\r\n\tMinimum amount of local currency to trade in a single order\r\n\tOverall maximum loss tolerance (eg 25% = 0.25)\r\n\tEnable Arbitrage trading engine (y/n)\r\n\tMinimum Profit to seek for Arbitrage (eg 10% = 0.10)\r\n\tEnable Trend-following trading engine (y/n)\r\n\tPolling Interval (in seconds)\r\n\tMinimum ticker size for trend following trade decisions\r\n\tMaximum ticker age for trend following trade decisions (in minutes)\r\n\tNumber of ticks used to calculate short Moving Average\r\n\tNumber of ticks used to calculate short Moving Average Convergence-Divergence\r\n\tNumber of ticks used to calculate long Moving Average Convergence-Divergence\r\n\tNumber of MACD values used to calculate MACD Signal Line\r\n\tBid Logic\r\n\tAsk Logic\r\n\tWhich risk algorithm would you like to use? (1 - 3)\r\n\t\t1: Conservative Risk\r\n\t\t2: High Risk\r\n\t\t3: Maximum Risk\r\n\tTrading fee (eg 0.6% = 0.006)\r\n\t\t\r\nIf used, the --use-arbitrage and --use-trend command line switches will over-ride their respective configuration file values.\r\nUse of --simulation-mode=false command line switch implies the user agrees with the license terms.\r\n\r\n## Suggested values\r\n================\r\n\r\nThe following are just some suggested values:\r\n\r\n\tPolling interval (in seconds) : 15 to 60 seconds\r\n\tMinimum ticker size for trend following trade decisions : Greater than 16\r\n\tMaximum ticker age for trend following trade decisions (in minutes) : Greater than 60 minutes\r\n\tNumber of ticks used to calculate short Moving Average : Minimum ticker size + 1\r\n\tNumber of ticks used to calculate short Moving Average Convergence-Divergence : 12\r\n\tNumber of ticks used to calculate long Moving Average Convergence-Divergence: 26\r\n\tNumber of MACD values used to calculate MACD Signal Line : 9\r\n\tTrading fee (eg 0.6% = 0.006) : 0.006\r\n\r\n## Practical example of Trend-following logic\r\n==========================================\r\n\r\nIf we have 100 ticks in our ticker.\r\nIf of those ticks 60 were up and 40 were down the trendarrow will be +20; the Advance/Decline alogrithm has determined that the market is now trending up.\r\nDuring that same time there were 75 instances where the bidArrow went up and 25 where it went down, the bidArrow is now +50\r\nIf the last trade was 10.25 and the VWAP is 10.20; the Volume articipation algorithm (VWAP Cross) has determined that now is a good time to sell because there is enormous pressure in the market to buy.\r\n\r\nSo how much do we sell?\r\nLet's assume we have 100 BTC.\r\ntrendArrow / ticker size = 20/100 = 0.2\r\nbidArrow / ticker size = 0.5\r\n\r\nUsing the conservative risk weight calculation:\r\n\r\n(0.2 * 0.5) =  10% of our 100 BTC balance.\r\n100BTC * 0.1 = 10BTC\r\n\r\nSo now we sell 10 BTC at market price for 102.5 local currency.\r\n\r\nNow an hour later the market has taken a dip.\r\nWe have 100 ticks in our ticker.\r\n60 were down, 40 were up the trendArrow is now -20; the Advance/Decline alogrithm has determined that the market is now trending down.\r\nThere were 75 instances where the askArrow went down and 25 where it went up.  The askArrow is now -50\r\nThe last trade was 10.20, the current VWAP is 10.25; the Volume articipation algorithm (VWAP Cross) has determined that now is a good time to buy because there is enormous pressure in the market to sell.\r\n\r\n\r\nOur local currency balance is 102.5\r\n(0.2 * 0.5) = 10% of our 102.5 local currency balance\r\n102.5 * 0.1 = 10.25\r\nWe now buy 1.025 BTC for 10.25, this gives us a profit of 0.025 BTC\r\n\r\nNow imagine that each of these trends continue on average for about 30 minutes before reversing and during that time we place 10 trades essentially identical (since these conditions are really only present for about 10 minutes out of each 30 minute trend), this is a profit of 0.25 BTC during that 30 minute period or 0.5 BTC per hour.\r\n24 * 0.5 BTC = 12 BTC or 12% profit in a day.\r\n\r\nThis strategy may not work for prolonged trends so it may be benificial to enable one of the slower reacting algorithms like EMA or SMA to determine when we are in a more prolonged trend and to disble trading until market direction changes.\r\n\t\t\r\n## Further reading\r\n===============\r\n\r\nA detailed discussion about this project may be found at: [https://bitcointalk.org/index.php?topic=109831.0](https://bitcointalk.org/index.php?topic=109831.0)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}